<section data-ng-controller="QuestsController" data-ng-init="find()">
	<div class="page-header">
		<h1>Quests</h1>
	</div>
	<div class="list-group">
		<a data-ng-repeat="quest in quests | filter: {world: 'Mistral'} | orderBy: levels | limitTo: 10" data-ng-href="#!/quests/{{quest._id}}" class="list-group-item">
			<h4 class="list-group-item-heading" data-ng-bind="quest.name"></h4>
			<table class="table table-bordered">
				<tr data-ng-repeat="level in quest.levels">
					<td>
						<h5>{{level.name}}</h5>

						<table>
							<tr>
								<th>
									Monsters
								</th>
							</tr>
							<tr data-ng-repeat="monster in level.monsters">
								<td>
									<span data-ng-repeat="unit in $root.allUnits | filter:{name : monster.name}:true">
										<a data-ng-href="#!/units/{{unit._id}}">
											<img class="icon-small" data-ng-src="{{unit.icon}}">
										</a>
									</span>
									{{monster.name}}
									{{monster.hp}}
								</td>
							</tr>
						</table>

					</td>
					<td>{{level.energy}}</td>
					<td>{{level.battles}}</td>
					<td>{{level.exp}}</td>
					<td>{{level.ratio}}</td>
				</tr>
			</table>	
		</a>
	</div>
	<div class="alert alert-warning text-center" data-ng-hide="!quests.$resolved || quests.length">
		No Quests yet, why don't you <a href="/#!/quests/create">create one</a>?
	</div>
</section>
